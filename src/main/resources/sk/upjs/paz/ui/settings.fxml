<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<BorderPane
        fx:id="root"
        prefHeight="800.0"
        prefWidth="1200.0"
        styleClass="dashboard-root"
        xmlns="http://javafx.com/javafx/17.0.12"
        xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="sk.upjs.paz.ui.SettingsController">

    <!-- ========== SIDEBAR ========== -->
    <left>
        <VBox prefWidth="240.0"
              styleClass="sidebar"
              BorderPane.alignment="CENTER">
            <children>

                <!-- Logo -->
                <VBox spacing="10.0"
                      styleClass="sidebar-header">
                    <padding>
                        <Insets top="24" right="24" bottom="16" left="24"/>
                    </padding>
                    <children>
                        <HBox alignment="CENTER_LEFT"
                              spacing="10.0">
                            <children>
                                <StackPane prefHeight="32.0"
                                           prefWidth="32.0"
                                           styleClass="sidebar-logo-circle">
                                    <children>
                                        <Label text="B"
                                               styleClass="sidebar-logo-letter"/>
                                    </children>
                                </StackPane>
                                <Label text="BookTrack"
                                       styleClass="sidebar-logo-text"/>
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <Separator/>

                <!-- Navigation -->
                <VBox spacing="6.0"
                      styleClass="sidebar-nav">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="16"/>
                    </padding>
                    <children>
                        <ToggleButton fx:id="dashboardNavButton"
                                      text="%nav.dashboard"
                                      onAction="#onDashboardSelected"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton fx:id="libraryNavButton"
                                      text="%nav.library"
                                      onAction="#onLibrarySelected"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton fx:id="currentlyReadingNavButton"
                                      text="%nav.currentlyReading"
                                      onAction="#onCurrentlyReadingSelected"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton fx:id="statisticsNavButton"
                                      text="%nav.statistics"
                                      onAction="#onStatisticsSelected"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton fx:id="settingsNavButton"
                                      text="%nav.settings"
                                      selected="true"
                                      onAction="#onSettingsSelected"
                                      styleClass="sidebar-nav-button,sidebar-nav-button--active"/>
                    </children>
                </VBox>

                <Pane VBox.vgrow="ALWAYS"/>

                <!-- User profile -->
                <VBox styleClass="sidebar-user">
                    <padding>
                        <Insets top="8" right="16" bottom="24" left="16"/>
                    </padding>
                    <children>
                        <Button fx:id="userProfileButton"
                                maxWidth="Infinity"
                                onAction="#onUserProfile"
                                styleClass="sidebar-user-button">
                            <graphic>
                                <HBox alignment="CENTER_LEFT"
                                      spacing="10.0">
                                    <children>
                                        <StackPane prefHeight="32.0"
                                                   prefWidth="32.0"
                                                   styleClass="sidebar-user-avatar">
                                            <children>
                                                <Label text="S"
                                                       styleClass="sidebar-user-initials"/>
                                            </children>
                                        </StackPane>

                                        <VBox spacing="2.0">
                                            <children>
                                                <Label fx:id="userNameLabel"
                                                       text="Sarah Chen"
                                                       styleClass="sidebar-user-name"/>
                                                <Label text="%nav.viewProfile"
                                                       styleClass="sidebar-user-subtitle"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                            </graphic>
                        </Button>
                    </children>
                </VBox>

            </children>
        </VBox>
    </left>

    <!-- ========== MAIN AREA ========== -->
    <center>
        <VBox
                BorderPane.alignment="CENTER">
            <children>

                <!-- HEADER -->
                <VBox
                        styleClass="header">
                    <children>
                        <HBox alignment="CENTER_LEFT"
                              spacing="16.0">
                            <padding>
                                <Insets top="24" right="32" bottom="24" left="32"/>
                            </padding>
                            <children>

                                <!-- Title + subtitle -->
                                <VBox spacing="4.0">
                                    <children>
                                        <Label fx:id="headerTitleLabel"
                                               text="%nav.settings"
                                               styleClass="header-title"/>
                                        <Label styleClass="header-subtitle"
                                               wrapText="true"
                                               text="%settings.manage_your_account_reading_preferences_and_appear"/>
                                    </children>
                                </VBox>

                                <Pane HBox.hgrow="ALWAYS"/>

                                <!-- Right side: theme + notifications -->
                                <HBox alignment="CENTER_RIGHT"
                                      spacing="8.0">
                                    <children>

                                        <!-- Theme toggle -->
                                        <ToggleButton fx:id="themeToggle"
                                                      onAction="#onToggleTheme"
                                                      styleClass="header-icon-button">
                                            <graphic>
                                                <ImageView fx:id="themeIcon"
                                                           fitWidth="18.0"
                                                           fitHeight="18.0"
                                                           preserveRatio="true"/>
                                            </graphic>
                                        </ToggleButton>

                                        <!-- Notifications button -->
                                        <Button fx:id="notificationsButton"
                                                onAction="#onNotifications"
                                                styleClass="header-icon-button">
                                            <graphic>
                                                <StackPane>
                                                    <children>
                                                        <ImageView fx:id="notificationsIcon"
                                                                   fitWidth="18.0"
                                                                   fitHeight="18.0"
                                                                   preserveRatio="true"/>
                                                        <Rectangle arcHeight="8.0"
                                                                   arcWidth="8.0"
                                                                   height="8.0"
                                                                   width="8.0"
                                                                   translateX="-6"
                                                                   translateY="6"
                                                                   styleClass="header-notification-dot"
                                                                   StackPane.alignment="TOP_RIGHT"/>
                                                    </children>
                                                </StackPane>
                                            </graphic>
                                        </Button>

                                    </children>
                                </HBox>

                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- CONTENT -->
                <ScrollPane fx:id="contentScrollPane"
                            fitToWidth="true"
                            VBox.vgrow="ALWAYS">
                    <content>
                        <VBox fx:id="contentRoot"
                              spacing="24.0">
                            <padding>
                                <Insets top="24" right="32" bottom="32" left="32"/>
                            </padding>
                            <children>

                                <!-- TOP ROW: Account + Reading preferences -->
                                <HBox spacing="24.0">
                                    <children>

                                        <!-- Account card -->
                                        <VBox prefWidth="280.0"
                                              spacing="16.0"
                                              styleClass="stat-card">
                                            <children>
                                                <Label text="%settings.account"
                                                       styleClass="section-title"/>

                                                <HBox spacing="12.0"
                                                      alignment="CENTER_LEFT">
                                                    <children>
                                                        <StackPane prefHeight="40.0"
                                                                   prefWidth="40.0"
                                                                   styleClass="settings-avatar-circle">
                                                            <children>
                                                                <Label text="SC"
                                                                       styleClass="settings-avatar-text"/>
                                                            </children>
                                                        </StackPane>
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Sarah Chen"
                                                                       styleClass="settings-name"/>
                                                                <Label text="Free plan"
                                                                       styleClass="settings-pill-label"/>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>

                                                <VBox spacing="6.0">
                                                    <children>
                                                        <Label text="%common.email"
                                                               styleClass="settings-label"/>
                                                        <Label text="sarah.chen@example.com"
                                                               styleClass="settings-email-box"/>
                                                    </children>
                                                </VBox>

                                                <Button maxWidth="Infinity"
                                                        text="%settings.manage_account"
                                                        styleClass="settings-secondary-button"/>

                                                <Label wrapText="true"
                                                       text="%settings.account_details_are_managed_on_the_web"
                                                       styleClass="settings-helper"/>

                                            </children>
                                        </VBox>

                                        <!-- Reading preferences card -->
                                        <VBox spacing="16.0"
                                              HBox.hgrow="ALWAYS"
                                              styleClass="stat-card">
                                            <children>

                                                <Label text="%settings.reading_preferences"
                                                       styleClass="section-title"/>

                                                <!-- Daily reading goal -->
                                                <VBox spacing="8.0">
                                                    <children>
                                                        <Label text="%settings.daily_reading_goal"
                                                               styleClass="settings-label"/>

                                                        <HBox spacing="8.0">
                                                            <children>
                                                                <ToggleButton fx:id="minutesGoalToggle"
                                                                              text="%settings.minutes_per_day"
                                                                              selected="true"
                                                                              styleClass="segmented-pill,segmented-pill--active"/>
                                                                <ToggleButton fx:id="pagesGoalToggle"
                                                                              text="%settings.pages_per_day"
                                                                              styleClass="segmented-pill"/>
                                                            </children>
                                                        </HBox>

                                                        <HBox spacing="8.0"
                                                              alignment="CENTER_LEFT">
                                                            <children>
                                                                <TextField fx:id="dailyGoalField"
                                                                           prefWidth="80.0"
                                                                           promptText="30"
                                                                           styleClass="settings-number-field"/>
                                                                <Label text="%settings.min"
                                                                       styleClass="settings-small-label"/>
                                                            </children>
                                                        </HBox>

                                                        <Label wrapText="true"
                                                               text="%settings.used_for_streaks_and_progress_toward_your_daily_go"
                                                               styleClass="settings-helper"/>
                                                    </children>
                                                </VBox>

                                                <!-- Default session duration -->
                                                <VBox spacing="6.0">
                                                    <children>
                                                        <Label text="%settings.default_session_duration"
                                                               styleClass="settings-label"/>
                                                        <HBox spacing="8.0"
                                                              alignment="CENTER_LEFT">
                                                            <children>
                                                                <TextField fx:id="defaultDurationField"
                                                                           prefWidth="80.0"
                                                                           promptText="25"
                                                                           styleClass="settings-number-field"/>
                                                                <Label text="%settings.minutes"
                                                                       styleClass="settings-small-label"/>
                                                            </children>
                                                        </HBox>
                                                        <Label wrapText="true"
                                                               text="%settings.used_when_starting_quick_sessions"
                                                               styleClass="settings-helper"/>
                                                    </children>
                                                </VBox>

                                                <!-- Interface language -->
                                                <VBox spacing="6.0">
                                                    <children>
                                                        <Label text="%settings.interface_language"
                                                               styleClass="settings-label"/>
                                                        <ComboBox fx:id="interfaceLanguageCombo"
                                                                  styleClass="settings-combobox">
                                                            <items>
                                                                <FXCollections fx:factory="observableArrayList">
                                                                    <String fx:value="English"/>
                                                                    <String fx:value="Slovak"/>
                                                                </FXCollections>
                                                            </items>
                                                        </ComboBox>

                                                        <Label wrapText="true"
                                                               text="%settings.only_labels_and_messages_are_affected"
                                                               styleClass="settings-helper"/>
                                                    </children>
                                                </VBox>

                                                <!-- Average reading speed -->
                                                <VBox spacing="6.0">
                                                    <children>
                                                        <Label text="%settings.average_reading_speed"
                                                               styleClass="settings-label"/>
                                                        <Slider fx:id="readingSpeedSlider"
                                                                min="0" max="100" value="50"/>
                                                        <HBox spacing="8.0"
                                                              alignment="CENTER">
                                                            <children>
                                                                <Label text="%settings.slow"
                                                                       styleClass="settings-small-label"/>
                                                                <Pane HBox.hgrow="ALWAYS"/>
                                                                <Label text="%settings.normal"
                                                                       styleClass="settings-small-label"/>
                                                                <Pane HBox.hgrow="ALWAYS"/>
                                                                <Label text="%settings.fast"
                                                                       styleClass="settings-small-label"/>
                                                            </children>
                                                        </HBox>
                                                        <Label wrapText="true"
                                                               text="%settings.helps_to_estimate_remaining_time_for_books"
                                                               styleClass="settings-helper"/>
                                                    </children>
                                                </VBox>

                                            </children>
                                        </VBox>

                                    </children>
                                </HBox>

                                <!-- BOTTOM: Appearance & notifications -->
                                <VBox spacing="16.0"
                                      styleClass="stat-card">
                                    <children>

                                        <Label text="%settings.appearance_and_notifications"
                                               styleClass="section-title"/>

                                        <HBox spacing="24.0"
                                              alignment="TOP_LEFT">
                                            <children>

                                                <!-- Appearance -->
                                                <VBox spacing="16.0">
                                                    <children>

                                                        <!-- Theme -->
                                                        <VBox spacing="6.0">
                                                            <children>
                                                                <Label text="%settings.theme"
                                                                       styleClass="settings-label"/>
                                                                <HBox spacing="8.0">
                                                                    <children>
                                                                        <ToggleButton fx:id="themeLightToggle"
                                                                                      text="%settings.light"
                                                                                      styleClass="segmented-pill"/>

                                                                        <ToggleButton fx:id="themeDarkToggle"
                                                                                      text="%settings.dark"
                                                                                      styleClass="segmented-pill"/>

                                                                    </children>
                                                                </HBox>
                                                            </children>
                                                        </VBox>

                                                        <!-- Density -->
                                                        <VBox spacing="6.0">
                                                            <children>
                                                                <Label text="%settings.density"
                                                                       styleClass="settings-label"/>
                                                                <HBox spacing="8.0">
                                                                    <children>
                                                                        <ToggleButton fx:id="densityComfortableToggle"
                                                                                      text="%settings.comfortable"
                                                                                      selected="true"
                                                                                      styleClass="segmented-pill,segmented-pill--active"/>
                                                                        <ToggleButton fx:id="densityCompactToggle"
                                                                                      text="%settings.compact"
                                                                                      styleClass="segmented-pill"/>
                                                                    </children>
                                                                </HBox>
                                                                <Label wrapText="true"
                                                                       text="%settings.affects_spacing_in_lists_and_cards"
                                                                       styleClass="settings-helper"/>
                                                            </children>
                                                        </VBox>

                                                    </children>
                                                </VBox>

                                                <!-- Notifications -->
                                                <VBox spacing="12.0">
                                                    <children>
                                                        <Label text="%common.notifications"
                                                               styleClass="settings-label"/>

                                                        <HBox spacing="8.0"
                                                              alignment="CENTER_LEFT">
                                                            <children>
                                                                <CheckBox fx:id="reminderCheck"/>
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label text="%settings.reading_reminders"
                                                                               styleClass="settings-name"/>
                                                                        <Label text="%settings.remind_me_if_i_haven_t_read_today"
                                                                               styleClass="settings-helper"/>
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>

                                                        <HBox spacing="8.0"
                                                              alignment="CENTER_LEFT">
                                                            <children>
                                                                <CheckBox fx:id="goalProgressCheck"/>
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label text="%settings.goal_progress"
                                                                               styleClass="settings-name"/>
                                                                        <Label text="%settings.notify_me_when_i_reach_my_daily_goal"
                                                                               styleClass="settings-helper"/>
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>

                                                        <HBox spacing="8.0"
                                                              alignment="CENTER_LEFT">
                                                            <children>
                                                                <CheckBox fx:id="monthSummaryCheck"/>
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label text="%settings.new_month_summary"
                                                                               styleClass="settings-name"/>
                                                                        <Label text="%settings.monthly_overview_of_your_reading"
                                                                               styleClass="settings-helper"/>
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>

                                                    </children>
                                                </VBox>

                                            </children>
                                        </HBox>

                                    </children>
                                </VBox>

                            </children>
                        </VBox>
                    </content>
                </ScrollPane>

            </children>
        </VBox>
    </center>
</BorderPane>

