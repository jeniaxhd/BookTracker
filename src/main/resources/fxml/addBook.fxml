<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>

<BorderPane fx:id="root"
            prefHeight="800.0"
            prefWidth="1200.0"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="sk.upjs.paz.ui.AddBookController"
            styleClass="dashboard-root">

    <stylesheets>
        <URL value="@../css/lightTheme.css"/>
    </stylesheets>

    <!-- ============ SIDEBAR ============ -->
    <left>
        <VBox prefWidth="240.0"
              styleClass="sidebar"
              BorderPane.alignment="CENTER">
            <children>

                <!-- Logo -->
                <VBox spacing="10.0"
                      styleClass="sidebar-header">
                    <padding>
                        <Insets top="24" right="24" bottom="16" left="24"/>
                    </padding>
                    <children>
                        <HBox alignment="CENTER_LEFT"
                              spacing="10.0">
                            <children>
                                <StackPane prefHeight="32.0"
                                           prefWidth="32.0"
                                           styleClass="sidebar-logo-circle">
                                    <children>
                                        <Label text="B"
                                               styleClass="sidebar-logo-letter"/>
                                    </children>
                                </StackPane>
                                <Label text="BookTrack"
                                       styleClass="sidebar-logo-text"/>
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <Separator/>

                <!-- Navigation -->
                <VBox spacing="6.0"
                      styleClass="sidebar-nav">
                    <children>
                        <ToggleButton text="Dashboard"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton text="Library"
                                      selected="true"
                                      styleClass="sidebar-nav-button,sidebar-nav-button--active"/>
                        <ToggleButton text="Currently Reading"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton text="Statistics"
                                      styleClass="sidebar-nav-button"/>
                        <ToggleButton text="Settings"
                                      styleClass="sidebar-nav-button"/>
                    </children>
                </VBox>

                <Pane VBox.vgrow="ALWAYS"/>

                <!-- User profile -->
                <VBox styleClass="sidebar-user">
                    <padding>
                        <Insets top="8" right="16" bottom="24" left="16"/>
                    </padding>
                    <children>
                        <Button maxWidth="Infinity"
                                styleClass="sidebar-user-button">
                            <graphic>
                                <HBox alignment="CENTER_LEFT"
                                      spacing="10.0">
                                    <children>
                                        <StackPane prefHeight="32.0"
                                                   prefWidth="32.0"
                                                   styleClass="sidebar-user-avatar">
                                            <children>
                                                <Label text="S"
                                                       styleClass="sidebar-user-initials"/>
                                            </children>
                                        </StackPane>

                                        <VBox spacing="2.0">
                                            <children>
                                                <Label text="Stano Krajci"
                                                       styleClass="sidebar-user-name"/>
                                                <Label text="View profile"
                                                       styleClass="sidebar-user-subtitle"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                            </graphic>
                        </Button>
                    </children>
                </VBox>
            </children>
        </VBox>
    </left>

    <!-- ============ MAIN AREA ============ -->
    <center>
        <VBox BorderPane.alignment="CENTER">
            <children>

                <!-- HEADER -->
                <VBox styleClass="header">
                    <children>
                        <HBox alignment="CENTER_LEFT"
                              spacing="16.0">
                            <padding>
                                <Insets top="24" right="32" bottom="24" left="32"/>
                            </padding>

                            <children>
                                <!-- Title + subtitle -->
                                <VBox spacing="4.0">
                                    <children>
                                        <Label text="Add Book"
                                               styleClass="header-title"/>
                                        <Label text="Add a new book to your library and set up its details."
                                               wrapText="true"
                                               styleClass="header-subtitle"/>
                                    </children>
                                </VBox>

                                <Pane HBox.hgrow="ALWAYS"/>

                                <!-- Header actions -->
                                <HBox alignment="CENTER_RIGHT"
                                      spacing="8.0">
                                    <children>

                                        <!-- Search -->
                                        <Button fx:id="searchButton"
                                                onAction="#onSearch"
                                                styleClass="header-icon-button">
                                            <graphic>
                                                <ImageView fx:id="searchIcon"
                                                           fitWidth="18.0"
                                                           fitHeight="18.0"
                                                           preserveRatio="true"/>
                                            </graphic>
                                        </Button>

                                        <!-- Notifications -->
                                        <Button fx:id="notificationsButton"
                                                onAction="#onNotifications"
                                                styleClass="header-icon-button">
                                            <graphic>
                                                <StackPane>
                                                    <children>
                                                        <ImageView fx:id="notificationsIcon"
                                                                   fitWidth="18.0"
                                                                   fitHeight="18.0"
                                                                   preserveRatio="true"/>
                                                        <Rectangle arcHeight="8.0"
                                                                   arcWidth="8.0"
                                                                   height="8.0"
                                                                   width="8.0"
                                                                   translateX="-6"
                                                                   translateY="6"
                                                                   styleClass="header-notification-dot"
                                                                   StackPane.alignment="TOP_RIGHT"/>
                                                    </children>
                                                </StackPane>
                                            </graphic>
                                        </Button>

                                        <!-- Theme toggle -->
                                        <ToggleButton fx:id="themeToggle"
                                                      onAction="#onToggleTheme"
                                                      styleClass="header-icon-button">
                                            <graphic>
                                                <ImageView fx:id="themeIcon"
                                                           fitWidth="18.0"
                                                           fitHeight="18.0"
                                                           preserveRatio="true"/>
                                            </graphic>
                                        </ToggleButton>

                                        <!-- Save book -->
                                        <Button text="Save Book"
                                                onAction="#onSaveBook"
                                                styleClass="header-primary-button"/>

                                    </children>
                                </HBox>
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- CONTENT -->
                <ScrollPane fitToWidth="true"
                            VBox.vgrow="ALWAYS">
                    <content>
                        <VBox spacing="24.0">
                            <padding>
                                <Insets top="24" right="32" bottom="32" left="32"/>
                            </padding>
                            <children>

                                <!-- Cover card + details card -->
                                <HBox spacing="24.0">
                                    <children>

                                        <!-- LEFT: cover card -->
                                        <VBox prefWidth="380.0"
                                              spacing="16.0"
                                              styleClass="stat-card,addbook-cover-card">
                                            <children>
                                                <Label text="Book cover &amp; preview"
                                                       styleClass="section-title"/>

                                                <!-- upload area -->
                                                <VBox alignment="CENTER"
                                                      spacing="10.0"
                                                      styleClass="upload-dropzone">
                                                    <children>
                                                        <Label text="â¤“"
                                                               styleClass="book-card-placeholder-icon"/>
                                                        <Label alignment="CENTER"
                                                               maxWidth="220.0"
                                                               wrapText="true"
                                                               text="Upload cover"
                                                               styleClass="book-card-placeholder-text"/>
                                                        <Label alignment="CENTER"
                                                               maxWidth="260.0"
                                                               wrapText="true"
                                                               text="Drag and drop or click to browse"
                                                               styleClass="header-subtitle"/>
                                                    </children>
                                                </VBox>

                                                <Button fx:id="uploadCoverButton"
                                                        maxWidth="Infinity"
                                                        text="Upload cover image"
                                                        styleClass="header-primary-button"/>
                                            </children>
                                        </VBox>

                                        <!-- RIGHT: book details -->
                                        <VBox spacing="16.0"
                                              styleClass="stat-card"
                                              HBox.hgrow="ALWAYS">
                                            <children>
                                                <Label text="Book details"
                                                       styleClass="section-title"/>

                                                <VBox spacing="12.0">
                                                    <children>

                                                        <Label text="Basic information"
                                                               styleClass="header-subtitle"/>

                                                        <!-- Title -->
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Book Title"/>
                                                                <TextField fx:id="titleField"
                                                                           promptText="Enter book title"/>
                                                            </children>
                                                        </VBox>

                                                        <!-- Author -->
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Author"/>
                                                                <TextField fx:id="authorField"
                                                                           promptText="Enter author name"/>
                                                            </children>
                                                        </VBox>

                                                        <!-- Category + Format -->
                                                        <HBox spacing="12.0">
                                                            <children>
                                                                <VBox spacing="4.0"
                                                                      HBox.hgrow="ALWAYS">
                                                                    <children>
                                                                        <Label text="Category"/>
                                                                        <ComboBox fx:id="categoryBox"
                                                                                  promptText="Select category"/>
                                                                    </children>
                                                                </VBox>

                                                                <VBox spacing="4.0"
                                                                      HBox.hgrow="ALWAYS">
                                                                    <children>
                                                                        <Label text="Format"/>
                                                                        <ComboBox fx:id="formatBox"
                                                                                  promptText="Select format"/>
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>

                                                        <!-- Language -->
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Language"/>
                                                                <TextField fx:id="languageField"
                                                                           promptText="e.g. English"/>
                                                            </children>
                                                        </VBox>

                                                        <!-- Tags -->
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Tags (optional)"/>
                                                                <TextField fx:id="tagsField"
                                                                           promptText="Type and press Enter to add tags"/>
                                                            </children>
                                                        </VBox>

                                                        <!-- Notes -->
                                                        <VBox spacing="4.0">
                                                            <children>
                                                                <Label text="Notes (optional)"/>
                                                                <TextArea fx:id="notesArea"
                                                                          prefRowCount="4"
                                                                          promptText="Thoughts, highlights, expectations..."/>
                                                            </children>
                                                        </VBox>

                                                    </children>
                                                </VBox>
                                            </children>
                                        </VBox>

                                    </children>
                                </HBox>

                            </children>
                        </VBox>
                    </content>
                </ScrollPane>

            </children>
        </VBox>
    </center>
</BorderPane>
